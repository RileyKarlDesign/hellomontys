<!-- 
    current_variant
 -->

{% assign has_multiple_variants = false %}
{% if product.variants.size > 1 %}
{% assign has_multiple_variants = true %}
{% endif %}

{% assign has_multiple_options = false %}
{% if product.options.size > 1 %}
{% assign has_multiple_options = true %}
{% endif %}

{% assign can_add_to_cart = false %}

{% if has_multiple_variants  == false and product.available %}

 {% assign can_add_to_cart == true %}

{% endif %}




<!-- //---------------------- json get -------------------------------->
{% if has_multiple_variants %}

    <!-- {% render 'get-variants-with-quantity-json' with product: product %} -->

    {% assign variants_with_quantity_json = product.variants | json %}

    {% unless variants_with_quantity_json contains 'inventory_quantity' %}

    {% for variant in product.variants %}
    {% assign replace_hook_variant_id = '"id":' | append: variant.id %}
    {% assign replace_id_plus_inventory = replace_hook_variant_id | append: ',' | append: '"inventory_quantity":' | append:
    variant.inventory_quantity %}

    {% assign variants_with_quantity_json = variants_with_quantity_json | replace: replace_hook_variant_id,
    replace_id_plus_inventory %}

    {% endfor %}

    {% endunless %}



{% endif %}

<!-- //---------------------- json get -------------------------------->





<form id="add-to-cart-form" action="/cart/add" method="post" enctype="multipart/form-data"
    data-variants="{{ variants_with_quantity_json | url_param_escape }}">

    {%if has_multiple_options or has_multiple_variants %}

        {% for option in product.options_with_values %}

            {% assign option_name = 'option' | append: option.position %}

            {% if option.name != 'Color'%}
                {% render 'product-option-row' option: option, option_name: option_name type: 'radio' %}
            {% else %}
                {% render 'product-option-row' option: option, option_name: option_name type: 'radio' %}
            {% endif %}


        {% endfor %}

    {% endif %}

    <input type="hidden" name="id" class='js-variant-id'
        value={{product.variants.first.id}}>
    <div class="product-price">
        <p> Price</p>
        <p class="js-price" data-default-price="{{ product.price | money }}">{{ current_variant.price | money }}</p>
    </div>

    <!-- <label for="Quantity">quanity</label>
    <input type="number" id="Quanyity" name="quantity" value="1" min="1"> -->
    <button class="hero-btn" type="submit" name="add" id="add-to-cart-button" > Add to cart </button>

</form>